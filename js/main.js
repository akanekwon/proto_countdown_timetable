(function(){var t;this.TimeTable=class{constructor(t){var e,s,i,r,n,a;for(this.src=t,this.tt=[],this.weekday=0,this.saturday=0,this.sunday_holiday=0,e=s=0,r=(a=this.loadTimeTable(this.src).split(String.fromCharCode(10))).length;0<=r?s<r:s>r;e=0<=r?++s:--s)this.tt[e]=a[e].split(",");for(e=i=0,n=this.tt.length;0<=n?i<n:i>n;e=0<=n?++i:--i)"[平日]"===this.tt[e][0]&&(this.weekday=e+1),"[土曜]"===this.tt[e][0]&&(this.saturday=e+1),"[日曜・祝日]"===this.tt[e][0]&&(this.sunday_holiday=e+1)}getRoute(){return this.tt[0][0]}getStation(){return this.tt[0][1]}getDesc(){return this.tt[0][2]}loadTimeTable(t){var e;return(e=new XMLHttpRequest).open("GET",t,!1),e.send(null),e.responseText}hhmm(t,e){var s,i;return s=t.getHours(),i=t.getMinutes(),e?String(s+24)+":"+String(i+100).substring(1):String(s+100).substring(1)+":"+String(i+100).substring(1)}nexttime(t,e){var s,i,r,n,a,h,o,g,u,l;for(u=this.hhmm(t,e),h=new Date(t),e?(s=(t.getDay()+6)%7,(l=new Date(t)).setDate(l.getDate()-1),isHoliday(l.getFullYear(),l.getMonth()+1,l.getDate(),!0)&&(s=0)):(s=t.getDay(),isHoliday(t.getFullYear(),t.getMonth()+1,t.getDate(),!0)&&(s=0)),0<s&&s<6&&(r=this.weekday),6===s&&(r=this.saturday),0===s&&(r=this.sunday_holiday),r=n=o=r,g=this.tt.length;(o<=g?n<g:n>g)&&!(this.tt[r][0]>u);r=o<=g?++n:--n);return this.tt[r]&&"["!==this.tt[r][0][0]?(this.tt[r][0].substring(0,2)>"23"?(i=parseInt(this.tt[r][0].substring(0,2),10)-24,e||h.setDate(h.getDate()+1)):i=parseInt(this.tt[r][0].substring(0,2),10),a=parseInt(this.tt[r][0].substring(3,5),10),h.setHours(i,a,0,0),{time:h,str:this.tt[r]}):!e&&(h.setDate(h.getDate()+1),h.setHours(0,0,0,0),this.nexttime(h,e))}},t=function(t){var e,s;return(e=String(Math.floor(t/36e5)))+":"+(s=String(Math.floor((t-36e5*e)/6e4)+100).substring(1))+":"+String(Math.floor((t-36e5*e-6e4*s)/1e3)+100).substring(1)},this.timetest=function(){var e,s,i,r,n,a;for(r=new Date,(offset<-60||60<offset)&&alert("offset range error"),r.setMinutes(r.getMinutes()+offset%60),document.getElementById("now").innerHTML="出発時刻："+r.toLocaleString(),s=i=0,a=tables;0<=a?i<a:i>a;s=0<=a?++i:--i)(n=this.table[s].nexttime(r,!0))||(n=this.table[s].nexttime(r,!1)),document.getElementById("next"+String(s+1)).innerHTML=n.str[0]+"発 "+n.str[3],document.getElementById("dir"+String(s+1)).innerHTML=n.str[2]+" "+n.str[1],(e=n.time-r)>=0&&(document.getElementById("dur"+String(s+1)).innerHTML="あと"+t(e));return setTimeout((function(){return timetest()}),1e3)}}).call(this);