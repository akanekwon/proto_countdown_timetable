(function(){var t;this.TimeTable=class{constructor(t){var e,s,r,i,n,a;for(this.src=t,this.tt=[],this.weekday=0,this.saturday=0,this.sunday_holiday=0,e=s=0,i=(a=this.loadTimeTable(this.src).split(String.fromCharCode(10))).length;0<=i?s<i:s>i;e=0<=i?++s:--s)this.tt[e]=a[e].split(",");for(e=r=0,n=this.tt.length;0<=n?r<n:r>n;e=0<=n?++r:--r)"[平日]"===this.tt[e][0]&&(this.weekday=e+1),"[土曜]"===this.tt[e][0]&&(this.saturday=e+1),"[日曜・祝日]"===this.tt[e][0]&&(this.sunday_holiday=e+1)}getRoute(){return this.tt[0][0]}getStation(){return this.tt[0][1]}getDesc(){return this.tt[0][2]}loadTimeTable(t){var e;return(e=new XMLHttpRequest).open("GET",t,!1),e.send(null),e.responseText}hhmm(t,e){var s,r;return s=t.getHours(),r=t.getMinutes(),e?String(s+24)+":"+String(r+100).substring(1):String(s+100).substring(1)+":"+String(r+100).substring(1)}nexttime(t,e){var s,r,i,n,a,h,o,u,g,l;for(g=this.hhmm(t,e),h=new Date(t),e?(s=(t.getDay()+6)%7,(l=new Date(t)).setDate(l.getDate()-1),isHoliday(l.getFullYear(),l.getMonth()+1,l.getDate(),!0)&&(s=0)):(s=t.getDay(),isHoliday(t.getFullYear(),t.getMonth()+1,t.getDate(),!0)&&(s=0)),0<s&&s<6&&(i=this.weekday),6===s&&(i=this.saturday),0===s&&(i=this.sunday_holiday),i=n=o=i,u=this.tt.length;(o<=u?n<u:n>u)&&!(this.tt[i][0]>g);i=o<=u?++n:--n);return this.tt[i]&&"["!==this.tt[i][0][0]?(this.tt[i][0].substring(0,2)>"23"?(r=parseInt(this.tt[i][0].substring(0,2),10)-24,e||h.setDate(h.getDate()+1)):r=parseInt(this.tt[i][0].substring(0,2),10),a=parseInt(this.tt[i][0].substring(3,5),10),h.setHours(r,a,0,0),{time:h,str:this.tt[i]}):!e&&(h.setDate(h.getDate()+1),h.setHours(0,0,0,0),this.nexttime(h,e))}},t=function(t){var e,s;return(e=String(Math.floor(t/36e5)))+":"+(s=String(Math.floor((t-36e5*e)/6e4)+100).substring(1))+":"+String(Math.floor((t-36e5*e-6e4*s)/1e3)+100).substring(1)},this.timetest=function(){var e,s,r,i,n,a,h;for(n=new Date,(offset<-60||60<offset)&&alert("offset range error"),n.setMinutes(n.getMinutes()+offset%60),document.getElementById("now").innerHTML="出発時刻："+n.toLocaleString(),r=i=0,h=tables;0<=h?i<h:i>h;r=0<=h?++i:--i)(a=this.table[r].nexttime(n,!0))||(a=this.table[r].nexttime(n,!1)),document.getElementById("next"+String(r+1)).innerHTML=a.str[0]+"発 "+a.str[3],document.getElementById("dir"+String(r+1)).innerHTML=a.str[2]+" "+a.str[1],(e=a.time-n)>=0&&((s=document.getElementById("dur"+String(r+1))).innerHTML="あと"+t(e),s.style.color=function(){switch(!1){case!(e<6e4):return"red";case!(e<18e4):return"orange";default:return"black"}}());return setTimeout((function(){return timetest()}),1e3)}}).call(this);